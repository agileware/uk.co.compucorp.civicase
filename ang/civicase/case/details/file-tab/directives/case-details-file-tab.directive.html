<div crm-ui-debug="fileLists"></div>
<div civicase-util="caseutil"></div>
<div civicase-api3-ctrl="fileLists"
  civicase-api3="['Case','getfiles', {case_id: item.id, text: '', options: {xref:1, limit:0}}]"
  on-refresh="caseutil.formatActivities(result.xref.activity)">
</div>
<div civicase-file-uploader="item" on-upload="fileLists.refresh()"></div>
<div class="civicase__file-tab-actions">
  <civicase-bulk-actions-checkboxes
    everything-count="totalCount"
    displayed-count="totalCount"
    is-select-all-available="true"
    show-checkboxes="showCheckboxes"
    ng-show="bulkAllowed"/>
  <span
    ng-if="bulkAllowed"
    class="civicase__bulkactions-actions-dropdown btn-group btn-group-sm">
    <div class="btn-group">
      <button
        type="button" class="btn btn-default"
        ng-class="{disabled: (!selectedActivities.length || !showCheckboxes) && !isSelectAll}"
        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        {{ ts('Actions') }}
      </button>
      <button
        type="button" class="btn btn-default dropdown-toggle"
        ng-class="{disabled: (!selectedActivities.length || !showCheckboxes) && !isSelectAll}"
        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <span class="caret"></span>
      </button>
      <ul
        class="dropdown-menu" refresh-callback="refresh"
        civicase-activity-actions mode="case-activity-bulk-action"
        selected-activities="selectedActivities" is-select-all="isSelectAll"
        total-count="totalCount" params="combinedFilterParams">
      </ul>
    </div>
  </span>

  <civicase-bulk-actions-message
    selected-items="selectedActivities.length" total-count="totalCount"
    is-select-all-available="true" show-checkboxes="showCheckboxes"
    is-select-all="isSelectAll">
  </civicase-bulk-actions-message>

  <div civicase-file-filter="fileLists" class="civicase__file-tab-filters"></div>
</div>
<!-- Files Activities List -->
<div civicase-file-list></div>
<!-- End - Files Activities List -->
